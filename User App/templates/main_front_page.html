<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareConnect</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/main_front_page.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script>
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                document.getElementById("location").innerHTML = "Geolocation is not supported by this browser.";
            }
        }

        function showPosition(position) {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;

            // Sending the location to the server
            fetch('/save-location', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ latitude: lat, longitude: lon })
            })
            
            .then(response => response.json())
            .then(data => console.log(data))
            .catch((error) => console.error('Error:', error));
        }

        function showError(error) {
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    document.getElementById("location").innerHTML = "User denied the request for Geolocation.";
                    break;
                case error.POSITION_UNAVAILABLE:
                    document.getElementById("location").innerHTML = "Location information is unavailable.";
                    break;
                case error.TIMEOUT:
                    document.getElementById("location").innerHTML = "The request to get user location timed out.";
                    break;
                case error.UNKNOWN_ERROR:
                    document.getElementById("location").innerHTML = "An unknown error occurred.";
                    break;
            }
        }
    </script>
</head>

<body onload="getLocation()">
    <header>
        <div class="logo-container">
            <!-- Human Logo -->
            <div class="user-container">
                <div class="dropdown user-menu">
                    <img src="{{ url_for('static', filename='images/icon.png') }}" alt="User Icon" class="user-icon dropdown-toggle" 
                         id="userMenu" data-bs-toggle="dropdown" aria-expanded="false">
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenu">
                        <li><a class="dropdown-item" href="{{ url_for('login') }}">Login</a></li>
                        <li><a class="dropdown-item" href="{{ url_for('register') }}">Register</a></li>
                    </ul>
                </div>
            </div>
    
            <!-- Title -->
            <h1>CareConnect</h1>
        </div>
    
            <!-- Right Side: Search Form -->
            <div class="search-container">
                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
            </div>
        </div>
    </header>

    <div class="back">
        <main>
            <h1>Get Better Care For Your Health</h1>
            <p>We are dedicated to the wellbeing of HUMANS.</p>
            <button>Learn More</button>

            <div id="location" style="margin-top: 20px;"></div> <!-- Div to display location -->

            <div class="images">
                <a href="{{ url_for('hospital_list') }}">
                    <div class="image-container">
                        <img class="option" src="{{ url_for('static', filename='images/Appointment.jpg') }}" alt="Appointment Services">
                        <span class="label hide">APPOINTMENT SERVICES</span>
                    </div>
                </a>
                <a href="{{ url_for('get_ride') }}">
                    <div class="image-container">
                        <img class="option" src="{{ url_for('static', filename='images/ambulance.jpg') }}" alt="Ambulance Services">
                        <span class="label hide">AMBULANCE SERVICES</span>
                    </div>
                </a>
                <a href="{{ url_for('hospital_list_rating') }}">
                    <div class="image-container">
                        <img class="option" src="{{ url_for('static', filename='images/ratings.jpg') }}" alt="Doctor Rating">
                        <span class="label hide">DOCTOR RATING</span>
                    </div>
                </a>
                <a href="{{ url_for('blood_bank_main_page') }}">
                    <div class="image-container">
                        <img class="option" src="{{ url_for('static', filename='../static/images/bank.jpg') }}" alt="Blood Bank">
                        <span class="label hide">BLOOD BANK</span>
                    </div>
                </a>
                <a href="{{ url_for('list_hospital') }}">
                    <div class="image-container">
                        <img class="option" src="{{ url_for('static', filename='images/bed.jpg') }}" alt="Bed Availability">
                        <span class="label hide">BED AVAILABILITY</span>
                    </div>
                </a>
                <a href="{{ url_for('Hospital_list_patient_history') }}">
                    <div class="image-container">
                        <img class="option" src="{{ url_for('static', filename='images/emergency.jpg') }}" alt="Patient History">
                        <span class="label hide">PATIEENT HISTORY</span>
                    </div>
                </a>
            </div>
        </main>

        <footer>
            <p>&copy; 2024 CURE POINT. All Rights Reserved.</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>

</html>
